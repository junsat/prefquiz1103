<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>å¸‚ç”ºæ‘ã‚¯ã‚¤ã‚º</title>
<style>
  body {
    font-family: "Hiragino Sans", "Yu Gothic", sans-serif;
    background: #121212;
    color: #f5f5f5;
    margin: 0;
    height: 100vh;
    display: flex;
    flex-direction: column;
    text-align: center;
    overflow: hidden; /* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«é˜²æ­¢ */
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
  }

  header {
    padding: 10px 0;
    background: #1b1b1b;
    border-bottom: 1px solid #333;
  }

  h1 {
    font-size: 1.4em;
    margin: 0;
    color: #f1f1f1;
  }

  #typeSelector {
    display: flex;
    justify-content: center;
    gap: 12px;
    margin-top: 6px;
  }

  #typeSelector label {
    font-size: 1.1em;
    color: #ccc;
    display: flex;
    align-items: center;
  }

  #typeSelector input[type="checkbox"] {
    transform: scale(1.8);
    margin-right: 6px;
    accent-color: #007aff;
  }

  #guide {
    font-size: 0.9em;
    color: #999;
    margin-top: 8px;
  }

  #quiz {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
  }

  .card {
    background: #1f1f1f;
    border-radius: 16px;
    box-shadow: 0 4px 10px rgba(255,255,255,0.05);
    padding: 30px 20px;
    width: 85%;
    transition: background 0.3s ease;
  }

  .name {
    font-size: 1.8em;
    font-weight: bold;
    color: #fff;
  }

  .pref {
    display: none;
    margin-top: 14px;
    font-size: 1.4em;
    color: #aaa;
    font-weight: bold;
  }

  @media (max-width: 480px) {
    .name { font-size: 1.6em; }
    .pref { font-size: 1.2em; }
    #typeSelector label { font-size: 1em; }
  }
</style>
</head>
<body>

  <header>
    <h1>å¸‚ç”ºæ‘ã‚¯ã‚¤ã‚º</h1>
    <div id="typeSelector">
      <label><input type="checkbox" value="city" checked> å¸‚</label>
      <label><input type="checkbox" value="town"> ç”º</label>
      <label><input type="checkbox" value="village"> æ‘</label>
    </div>
    <div id="guide">ğŸ“ ç”»é¢ã‚’ã‚¿ãƒƒãƒ— â†’ ç­”ãˆè¡¨ç¤º / ã‚‚ã†ä¸€åº¦ â†’ æ¬¡ã®å•é¡Œ</div>
  </header>

  <div id="quiz"></div>

  <footer>å…¨ç”»é¢ã‚¿ãƒƒãƒ—ã§é€²è¡Œã§ãã¾ã™</footer>

  <script>
  const data = [
    { name: "æœ­å¹Œå¸‚", pref: "åŒ—æµ·é“", type: "city" },
    { name: "å·å£å¸‚", pref: "åŸ¼ç‰çœŒ", type: "city" },
    { name: "å—æœ¨æ›½ç”º", pref: "é•·é‡çœŒ", type: "town" },
    { name: "ç™½é¦¬æ‘", pref: "é•·é‡çœŒ", type: "village" },
    { name: "é‚£è¦‡å¸‚", pref: "æ²–ç¸„çœŒ", type: "city" },
    { name: "ä¼Šå‹¢å¸‚", pref: "ä¸‰é‡çœŒ", type: "city" },
  ];

  function shuffle(array) {
    for (let i = array.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
  }

  let shuffledData = [];
  let currentIndex = 0;
  let answered = false;
  const quizContainer = document.getElementById('quiz');

  function getSelectedTypes() {
    return Array.from(document.querySelectorAll('#typeSelector input:checked')).map(cb => cb.value);
  }

  function getFilteredData() {
    const selected = getSelectedTypes();
    return shuffle(data.filter(item => selected.includes(item.type)));
  }

  function showQuestion(index) {
    quizContainer.innerHTML = '';
    answered = false;
    const item = shuffledData[index];
    const card = document.createElement('div');
    card.className = 'card';
    card.innerHTML = `
      <div class="name">${item.name}</div>
      <div class="pref">${item.pref}</div>
    `;
    quizContainer.appendChild(card);
  }

  function startQuiz() {
    shuffledData = getFilteredData();
    currentIndex = 0;
    if (shuffledData.length > 0) showQuestion(currentIndex);
    else quizContainer.innerHTML = '<p>è¡¨ç¤ºã™ã‚‹å¸‚ç”ºæ‘ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>';
  }

  document.body.addEventListener('click', (e) => {
    if (e.target.closest('#typeSelector')) return; // ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹æŠ¼ä¸‹ã¯ç„¡è¦–
    if (e.target.tagName === 'INPUT' || e.target.tagName === 'LABEL') return;

    const pref = document.querySelector('.pref');
    if (!pref) return;

    if (!answered) {
      pref.style.display = 'block';
      answered = true;
    } else {
      currentIndex++;
      if (currentIndex < shuffledData.length) {
        showQuestion(currentIndex);
      } else {
        quizContainer.innerHTML = '<p style="font-size:1.4em;">ğŸ‰ ã‚¯ã‚¤ã‚ºçµ‚äº†ï¼</p>';
      }
    }
  });

  document.querySelectorAll('#typeSelector input').forEach(cb => {
    cb.addEventListener('change', startQuiz);
  });

  startQuiz();
  </script>
</body>
</html>

